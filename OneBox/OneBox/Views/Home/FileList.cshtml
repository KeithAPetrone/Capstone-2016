@{
    ViewBag.Title = "FileList";
}
<h2>@ViewBag.Title.</h2>
<h3>@ViewBag.Message</h3>
<html>
<head>
    <title>File List</title>
    <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
</head>
<body>
    <table border="0" cellpadding="10">
        <tr>
            <td>
                <h1>Welcome to OneBox</h1>
            </td>
        </tr>
    </table>

    <p>This is the file list page!</p><br/><br />
    
    @{
        IEnumerable<Google.Apis.Drive.v2.Data.File> fileList = (IEnumerable<Google.Apis.Drive.v2.Data.File>
        )TempData["Result"];
        DropBoxDownloader d = new DropBoxDownloader();
        d.DropBoxAuthenticate();
        }
        <p>Add files with this:</p>


        <form action="@Url.Action("Upload", "Home")" method="post" enctype="multipart/form-data">

            <label for="file">Filename:</label>
            <input type="file" name="file" id="file" />

            <input type="submit" />
        </form>
        <br />
        <p>Search for files:</p>

        <form action="" method="post" enctype="multipart/form-data">

            <label for="file">Criteria:</label>
            <input type="search" name="search" id="search" />

            <input type="submit" />
        </form>
        <br />

        <br /><br />
        <br /><br /><p>Your files:</p>
        <table border="1">
            @{
                for (int i = 0; i < fileList.Count(); i++)
                {
                    <tr>
                        @{
                            for (int j = 0; j < 5 && i < fileList.Count(); j++)
                            {
                                <td>
                                    <p>@fileList.ElementAt(i).Title</p>
                                    @{
                                        <img src="@fileList.ElementAt(i).ThumbnailLink" />
                                    }

                                    <a href="@fileList.ElementAt(i).AlternateLink">Download here!</a>
                                    @{
                                        i++;
                                    }
                                </td>
                                        }
                        }
                    </tr>
                                        }
            }
        </table>
</body>
</html>